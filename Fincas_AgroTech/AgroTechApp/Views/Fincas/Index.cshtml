@model IEnumerable<AgroTechApp.Models.DB.Finca>

@{
    ViewData["Title"] = "Lista de Fincas";
    var primaryColor = "#2E8B57";
    var secondaryColor = "#F4A460";
    var lightColor = "#F8F9FA";
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Fincas - AgroTech</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reutilizamos los mismos estilos del index de pesajes */
        :root {
            --primary: #2E8B57;
            --primary-dark: #26734d;
            --primary-light: #3CB371;
            --secondary: #F4A460;
            --light: #f8f9fa;
            --dark: #333;
            --gray: #6c757d;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
            --border: #e1e5e9;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--dark);
            padding: 20px;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        .header, .dashboard-cards, .main-content, .sidebar-card, .table-container, .pagination, .footer {
            margin-bottom: 2rem;
        }

        .header { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; }
        .logo { display: flex; align-items: center; gap: 1rem; }
        .logo-icon { font-size: 2.5rem; color: var(--primary); }
        .logo-text h1 { font-size: 2rem; color: var(--primary); }
        .logo-text p { font-size: 0.9rem; color: var(--gray); }

        .user-info { display: flex; align-items: center; gap: 1rem; background: white; padding: 0.75rem 1.5rem; border-radius: 50px; box-shadow: 0 4px 12px var(--shadow); }
        .user-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; }

        .table-container { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px var(--shadow); }
        .table { width: 100%; border-collapse: collapse; }
        .table th, .table td { padding: 1rem; border-bottom: 1px solid var(--border); text-align: left; }
        .table th { background: var(--light); font-weight: 600; }
        .table tbody tr:hover td { background: rgba(46, 139, 87, 0.05); }

        .status { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.35rem 0.75rem; border-radius: 50px; font-size: 0.85rem; font-weight: 600; }
        .status-active { background: rgba(40, 167, 69, 0.15); color: var(--success); }
        .status-inactive { background: rgba(108, 117, 125, 0.15); color: var(--gray); }

        .actions { display: flex; gap: 0.5rem; }
        .action-btn { width: 35px; height: 35px; border-radius: 6px; display: flex; align-items: center; justify-content: center; cursor: pointer; border: none; color: white; font-size: 0.9rem; }
        .action-view { background: var(--info); }
        .action-edit { background: var(--warning); }
        .action-delete { background: var(--danger); }
        .action-btn:hover { transform: scale(1.1); }

        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; display: inline-flex; align-items: center; gap: 0.5rem; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-outline { background: transparent; color: var(--primary); border: 2px solid var(--primary); }

        .footer { text-align: center; color: var(--gray); font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header fade-in">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-tree"></i>
                </div>
                <div class="logo-text">
                    <h1>AgroTech Fincas</h1>
                    <p>Sistema de gestión de fincas</p>
                </div>
            </div>
            <div class="user-info">
                <div class="user-avatar">JD</div>
                <div class="user-details">
                    <div class="user-name">Juan Díaz</div>
                    <div class="user-role">Administrador</div>
                </div>
            </div>
        </header>

        <!-- Actions -->
        <div class="actions-bar fade-in">
            <h2 class="section-title">
                <i class="fas fa-list"></i>
                Lista de Fincas
            </h2>
            <div class="action-buttons">
                <button class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    Nueva Finca
                </button>
                <button class="btn btn-outline">
                    <i class="fas fa-download"></i>
                    Exportar
                </button>
            </div>
        </div>

        <!-- Table -->
        <div class="table-container fade-in">
            <table class="table">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Ubicación</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var finca in Model)
                    {
                        <tr>
                            <td>@finca.Nombre</td>
                            <td>@finca.Ubicacion</td>
                            <td>
                                <span class="status @(finca.Activa ? "status-active" : "status-inactive")">
                                    <i class="fas @(finca.Activa ? "fa-check-circle" : "fa-exclamation-circle")"></i>
                                    @(finca.Activa ? "Activa" : "Inactiva")
                                </span>
                            </td>
                            <td>
                                <div class="actions">
                                    <button class="action-btn action-view"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn action-edit"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn action-delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- Footer -->
        <footer class="footer fade-in">
            <p>© 2023 AgroTech - Sistema de Gestión de Fincas. Todos los derechos reservados.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const actionButtons = document.querySelectorAll('.action-btn');
            actionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const action = this.classList[1];
                    const fincaName = this.closest('tr').querySelector('td:first-child').textContent;

                    let actionText = '';
                    switch(action) {
                        case 'action-view': actionText = 'Ver detalles'; break;
                        case 'action-edit': actionText = 'Editar'; break;
                        case 'action-delete': 
                            if(!confirm(`¿Está seguro de que desea eliminar la finca ${fincaName}?`)) return;
                            actionText = 'Eliminar'; break;
                    }

                    console.log(`${actionText} para ${fincaName}`);
                    this.style.transform = 'scale(0.9)';
                    setTimeout(() => { this.style.transform = 'scale(1)'; }, 150);
                });
            });

            const newFincaBtn = document.querySelector('.btn-primary');
            newFincaBtn.addEventListener('click', function() {
                window.location.href = 'create.html';
            });
        });
    </script>
</body>
</html>
